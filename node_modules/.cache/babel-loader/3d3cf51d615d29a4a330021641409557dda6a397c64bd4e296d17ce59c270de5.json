{"ast":null,"code":"import{useRef,useState}from\"react\";import'./preview-modal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PreviewModal(_ref){let{srcs,onClose}=_ref;// ------- 드래그 액션\nconst listRef=useRef(null);const[isMouseDown,setIsMouseDown]=useState(false);const mouseCoords=useRef({startX:0,scrollLeft:0});const handleDragStart=e=>{if(!listRef.current)return;const slider=listRef.current;const startX=e.pageX-slider.offsetLeft;const scrollLeft=slider.scrollLeft;mouseCoords.current={startX,scrollLeft};setIsMouseDown(true);document.body.style.cursor=\"grabbing\";};const handleDragEnd=()=>{setIsMouseDown(false);if(!listRef.current)return;document.body.style.cursor=\"default\";};const handleDrag=e=>{if(!isMouseDown||!listRef.current)return;e.preventDefault();const slider=listRef.current;const x=e.pageX-slider.offsetLeft;const walkX=x-mouseCoords.current.startX;slider.scrollLeft=mouseCoords.current.scrollLeft-walkX;console.log(walkX);};// ------------------\nconst[selectedIdx,setSelectedIdx]=useState(0);const onClickOverlay=e=>{e.stopPropagation();};const leftClick=e=>{e.stopPropagation();if(selectedIdx===0)return;setSelectedIdx(prev=>prev-1);};const rightClick=e=>{e.stopPropagation();if(selectedIdx===srcs.length-1)return;setSelectedIdx(prev=>prev+1);};const clickImg=(e,i)=>{e.stopPropagation();setSelectedIdx(i);};return/*#__PURE__*/_jsx(\"div\",{className:\"modal\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",onClick:onClickOverlay,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top\",children:[/*#__PURE__*/_jsx(\"div\",{className:`arrowBtn${selectedIdx===0?' disabled':''}`,onClick:leftClick,children:/*#__PURE__*/_jsx(LeftIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"imageBox\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img\",draggable:false,src:srcs[selectedIdx],alt:srcs[selectedIdx]})}),/*#__PURE__*/_jsx(\"div\",{className:`arrowBtn${selectedIdx===srcs.length-1?' disabled':''}`,onClick:rightClick,children:/*#__PURE__*/_jsx(RightIcon,{})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom\",children:/*#__PURE__*/_jsx(\"div\",{className:\"listView\",ref:listRef,onMouseDown:handleDragStart,onMouseUp:handleDragEnd,onMouseMove:handleDrag,children:srcs.map((src,i)=>{return/*#__PURE__*/_jsx(\"div\",{className:`imgWrapper${i===selectedIdx?' selected':''}`,onClick:e=>clickImg(e,i),children:/*#__PURE__*/_jsx(\"img\",{className:\"img\",draggable:false,src:src,alt:`allImg${i}`},i)});})})})]})});}function LeftIcon(){return/*#__PURE__*/_jsx(\"svg\",{fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"path\",{clipRule:\"evenodd\",fillRule:\"evenodd\",d:\"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z\"})});};function RightIcon(){return/*#__PURE__*/_jsx(\"svg\",{fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"path\",{clipRule:\"evenodd\",fillRule:\"evenodd\",d:\"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z\"})});};","map":{"version":3,"names":["useRef","useState","jsx","_jsx","jsxs","_jsxs","PreviewModal","_ref","srcs","onClose","listRef","isMouseDown","setIsMouseDown","mouseCoords","startX","scrollLeft","handleDragStart","e","current","slider","pageX","offsetLeft","document","body","style","cursor","handleDragEnd","handleDrag","preventDefault","x","walkX","console","log","selectedIdx","setSelectedIdx","onClickOverlay","stopPropagation","leftClick","prev","rightClick","length","clickImg","i","className","onClick","children","LeftIcon","draggable","src","alt","RightIcon","ref","onMouseDown","onMouseUp","onMouseMove","map","fill","viewBox","xmlns","clipRule","fillRule","d"],"sources":["F:/WebProject/noobTest/web-client/src/component/preview-modal.js"],"sourcesContent":["import { useRef, useState } from \"react\";\r\nimport './preview-modal.css';\r\n\r\nexport default function PreviewModal({ srcs, onClose }) {\r\n  // ------- 드래그 액션\r\n  const listRef = useRef(null);\r\n  const [isMouseDown, setIsMouseDown] = useState(false);\r\n  const mouseCoords = useRef({\r\n      startX: 0,\r\n      scrollLeft: 0,\r\n  });\r\n  const handleDragStart = (e) => {\r\n      if (!listRef.current) return;\r\n    const slider = listRef.current;\r\n      const startX = e.pageX - slider.offsetLeft;\r\n      const scrollLeft = slider.scrollLeft;\r\n      mouseCoords.current = { startX, scrollLeft };\r\n      setIsMouseDown(true);\r\n      document.body.style.cursor = \"grabbing\";\r\n  }\r\n  const handleDragEnd = () => {\r\n      setIsMouseDown(false);\r\n      if (!listRef.current) return;\r\n      document.body.style.cursor = \"default\";\r\n  }\r\n  const handleDrag = (e) => {\r\n      if (!isMouseDown || ! listRef.current) return;\r\n      e.preventDefault();\r\n      const slider = listRef.current;\r\n      const x = e.pageX - slider.offsetLeft;\r\n      const walkX = (x - mouseCoords.current.startX);\r\n      slider.scrollLeft = mouseCoords.current.scrollLeft - walkX;\r\n      console.log(walkX)\r\n  }\r\n  // ------------------\r\n  const [selectedIdx, setSelectedIdx] = useState(0);\r\n  const onClickOverlay = (e) => {\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const leftClick = (e) => {\r\n    e.stopPropagation();\r\n    if (selectedIdx === 0) return;\r\n    setSelectedIdx(prev => prev - 1);\r\n  };\r\n  const rightClick = (e) => {\r\n    e.stopPropagation();\r\n    if (selectedIdx === (srcs.length - 1)) return;\r\n    setSelectedIdx(prev => prev + 1);\r\n  };\r\n  const clickImg = (e, i) => {\r\n    e.stopPropagation();\r\n    setSelectedIdx(i);\r\n  }\r\n\r\n  return <div className=\"modal\" onClick={onClose}>\r\n    <div className=\"wrapper\" onClick={onClickOverlay}>\r\n      <div className=\"top\">\r\n        <div className={`arrowBtn${selectedIdx === 0 ? ' disabled' : ''}`} onClick={leftClick}><LeftIcon/></div>\r\n        <div className=\"imageBox\"><img className=\"img\" draggable={false} src={srcs[selectedIdx]} alt={srcs[selectedIdx]}/></div>\r\n        <div className={`arrowBtn${selectedIdx === (srcs.length - 1) ? ' disabled' : ''}`} onClick={rightClick}><RightIcon/></div>\r\n      </div>\r\n      <div className=\"bottom\">\r\n        <div className=\"listView\" ref={listRef} onMouseDown={handleDragStart} onMouseUp={handleDragEnd} onMouseMove={handleDrag}>\r\n          {\r\n            srcs.map((src, i) => {\r\n              return <div className={`imgWrapper${i === selectedIdx ? ' selected' : ''}`} onClick={(e) => clickImg(e, i)}><img className=\"img\" draggable={false} src={src} key={i} alt={`allImg${i}`}/></div>;\r\n            })\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nfunction LeftIcon() {\r\n  return <svg fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\r\n  <path clipRule=\"evenodd\" fillRule=\"evenodd\" d=\"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z\" />\r\n</svg>;\r\n};\r\nfunction RightIcon() {\r\n  return <svg fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\r\n  <path clipRule=\"evenodd\" fillRule=\"evenodd\" d=\"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z\" />\r\n</svg>;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}